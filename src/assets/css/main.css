/* ============================================
   CONVENZIONE NAMING: Prefisso df-
   ============================================
   Le classi custom di questo progetto usano il prefisso "df-" (default).
   Questo le distingue dalle classi di Tailwind e altri framework.
   Esempio: .df-border, .df-border-t, .df-border-b
   ============================================ */

/* ============================================
   ACCENT FONT
   ============================================
   Font decorativo per titoli e accenti.
   Configurazione centralizzata: per cambiare font, modifica:
   1. @import qui sotto (punta al nuovo CSS del font)
   2. --font-accent nel @theme (nome font-family)
   3. _data/fonts.json (path per il preload)

   Il CSS del font (@font-face) usa font-display: fallback
   per evitare flash: 100ms invisibile, poi fallback se lento.
   ============================================ */
@import "../fonts/press-start-2p/press-start-2p.css";

/* ============================================
   Tailwind CSS v4
   ============================================ */
@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* ============================================
   Design System - Design Tokens
   ============================================ */
@theme {
  /* === Typography === */
  --font-accent: "Press Start 2P", sans-serif; /* Font per titoli e accenti */

  /* === Brand Colors === */
  --color-primary: #fde047; /* Yellow 300 - Primary Brand Color */
  --color-primary-light: color-mix(
    in srgb,
    var(--color-primary) 50%,
    white
  ); /* 30% pi√π chiaro, calcolato automaticamente */
  --color-primary-dark: color-mix(
    in srgb,
    var(--color-primary) 80%,
    black
  ); /* 30% pi√π scuro, calcolato automaticamente */
  --color-secondary: #64748b; /* Slate 500 */
  --color-accent: #2563eb; /* Blue 600 */

  /* === Neutral Colors === */
  --color-bg-main: #ffffff;
  --color-bg-alt: #f3f4f6; /* Gray 100 */
  --color-text-primary: #111827; /* Gray 900 */
  --color-text-secondary: #6b7280; /* Gray 500 */

  /* === Component Colors === */
  --color-card-bg: #ffffff;
  --color-card-border: #000000;
  --color-card-hover: #fef3c7; /* Yellow 100 */

  /* === Border Radius === */
  --radius-default: 0px; /* Brutalist style - sharp corners */
  --radius-sm: 0.5rem; /* 8px */
  --radius-md: 0.75rem; /* 12px */
  --radius-lg: 1rem; /* 16px */
  --radius-xl: 1.5rem; /* 24px */
  --radius-2xl: 2rem; /* 32px */
  --radius-3xl: 2.5rem; /* 40px */

  /* === Spacing === */
  --spacing-card: 1.5rem; /* p-6 */
  --spacing-card-sm: 1rem; /* p-4 */
  --spacing-section: 2rem; /* my-8 */

  /* === Shadows (Neobrutalist Style) === */
  /* Sovrascriviamo le shadow di Tailwind con lo stile neobrutalist */
  --shadow: 4px 4px 0 0 rgb(0 0 0);
  --shadow-top-left: -4px -4px 0 0 rgb(0 0 0);

  /* === Transitions === */
  --transition-fast: 150ms;
  --transition-base: 300ms;
  --transition-slow: 500ms;
}

/* ============================================
   Global Text Handling
   Gestione parole lunghe: spezza le parole quando necessario
   e aggiunge sillabazione automatica (richiede lang="it" su html)
   ============================================ */

@layer base {
  /* 1. LIVELLO BASE (Safety) - Applicalo globalmente */
  /* Impedisce che URL o stringhe lunghe rompano il layout orizzontale */
  * {
    overflow-wrap: anywhere;
  }

  /* 2. LIVELLO TITOLI (Controllo Estetico) */
  /* Impedisce sillabazioni automatiche brutte nei titoli e nelle card */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  .card-title {
    hyphens: manual;
  }

  /* 3. LIVELLO TESTO LUNGO (Densit√† e Lettura) */
  /* Attiva la sillabazione solo dove serve davvero risparmiare spazio */
  p,
  li {
    hyphens: auto;
    /* Opzionale (Chrome 114+): evita orfane di una sola parola a fine riga */
    text-wrap: pretty;
  }
}

/* ============================================
   Component Classes
   ============================================ */
@layer components {
  /* === CARD COMPONENT (moderna con hover) === */
  .card {
    @apply bg-white overflow-hidden shadow;
    border-radius: var(--radius-default);
  }

  .card-interactive {
    @apply transition-all duration-300 transform hover:-translate-y-2;
  }

  .card-body {
    @apply p-6;
  }

  .card-title {
    @apply font-bold text-gray-900 mb-2;
  }

  .card-description {
    @apply text-gray-600 text-sm leading-relaxed;
  }

  .card-image {
    @apply w-full h-48 object-cover;
  }

  .card-image-hover {
    @apply group-hover:scale-110 transition-transform duration-300;
  }

  /* === BRUTAL COMPONENT (neobrutalist article box) === */
  .brutal-box {
    @apply border-2 border-black bg-white my-8 shadow;
  }

  .brutal-box-sm {
    @apply border-2 border-black bg-white shadow;
  }

  .brutal-header {
    @apply p-3;
    background-color: var(--color-primary);
  }

  .brutal-body {
    @apply border-t-2 border-black p-4 sm:p-6;
  }

  .brutal-tag {
    @apply text-xs/none font-bold uppercase;
  }

  .brutal-dots {
    @apply flex gap-1;
  }

  .brutal-dot {
    @apply size-3 border-2 border-black bg-white;
  }

  /* === BUTTON STYLES === */
  .btn-primary {
    @apply inline-block bg-blue-600 text-white px-4 py-2;
    @apply hover:bg-blue-700 transition-colors;
    border-radius: var(--radius-default);
  }

  .btn-brutal {
    @apply block border-2 border-black bg-white p-4 sm:p-6 shadow;
    @apply focus:outline-0;
    transition: background-color 300ms;
  }

  .btn-brutal:hover {
    background-color: var(--color-primary-dark);
  }

  .btn-brutal:focus {
    box-shadow: 0 0 0 2px var(--color-primary);
  }

  /* === UTILITY CLASSES === */
  /* Background Primary */
  .bg-primary {
    background-color: var(--color-primary);
  }

  .hover\:bg-primary-dark:hover {
    background-color: var(--color-primary-dark);
  }

  /* Border Radius Default */
  .rounded-default {
    border-radius: var(--radius-default);
  }

  /* === df-border: Bordi standard del progetto (border-2 border-black) === */
  .df-border {
    @apply border-2 border-black;
  }

  .df-border-t {
    @apply border-t-2 border-black;
  }

  .df-border-b {
    @apply border-b-2 border-black;
  }

  .df-border-l {
    @apply border-l-2 border-black;
  }

  .df-border-r {
    @apply border-r-2 border-black;
  }

  .df-border-x {
    @apply border-x-2 border-black;
  }

  .df-border-y {
    @apply border-y-2 border-black;
  }

  /* Focus Ring Primary */
  .focus-ring-primary:focus {
    box-shadow: 0 0 0 2px var(--color-primary);
  }

  /* === LINK STYLES === */
  .link-hover-light {
    @apply hover:text-blue-200 transition-colors;
  }

  .link-brutal {
    @apply transition-colors duration-300;
    @apply hover:text-gray-600 hover:underline;
  }

  /* === VIDEO CONTAINER === */
  .video-container {
    @apply overflow-hidden w-full;
    border-radius: var(--radius-default);
  }

  .video-responsive {
    @apply w-full h-auto;
    border-radius: var(--radius-default);
  }

  /* === TYPOGRAPHY COMPONENTS === */
  h1,
  h2 {
    font-family: var(--font-accent);
  }

  .title {
    @apply text-3xl sm:text-4xl lg:text-4xl;
    @apply font-black tracking-tight leading-tight;
    @apply text-gray-900;
    @apply mb-6;
    font-family: var(--font-accent);
  }

  .subtitle {
    @apply text-lg sm:text-xl lg:text-2xl;
    @apply font-medium tracking-wide leading-relaxed;
    @apply text-gray-600;
    @apply mb-4;
  }

  /* === HORIZONTAL RULE === */
  hr {
    @apply my-8 border-none border-t-2 border-black;
  }

  /* === STRIKETHROUGH (markdown ~~testo~~) === */
  s {
    @apply decoration-red-500 decoration-2;
  }

  /* === LISTE - Spaziatura uniforme alla normale interlinea ===
     Rimuove il margine extra tra gli elementi delle liste per allinearli
     alla spaziatura naturale del testo (leading-relaxed).
     !important necessario per sovrascrivere i :where() di Typography. */

  .prose li {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }

  /* === LISTE ORDINATE - Font accent per i numeri === */
  .prose ol {
    list-style-position: inside;
    padding-left: 0 !important;
  }

  .prose ol li::marker {
    font-family: var(--font-accent);
    font-size: 0.7em;
  }

  /* === UTILITY: Font Accent === */
  .font-accent {
    font-family: var(--font-accent);
  }

  /* Alias per retrocompatibilit√† (usare font-accent per nuovi elementi) */
  .font-pixel {
    font-family: var(--font-accent);
  }

  /* === ANIMATION: Marquee (scrolling text) === */
  .animate-marquee {
    display: inline-block;
    padding-left: 100%;
    animation: marquee 15s linear infinite;
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }

    100% {
      transform: translateX(-100%);
    }
  }

  /* === LQIP: Low Quality Image Placeholder ===
     Placeholder pixelato che sfuma nell'immagine reale.
     - Container: sfondo con immagine tiny scalata (pixelated)
     - Immagine: fade-in quando caricata */
  .lqip-container {
    overflow: hidden;
  }

  .lqip-container picture {
    position: absolute;
    inset: 0;
  }

  .lqip-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    /* transition: opacity 3s ease-out; */
  }

  /* Fade-in quando l'immagine √® caricata (classe aggiunta via JS) */
  .lqip-container img.loaded {
    opacity: 1;
  }

  /* ============================================
     EMOJI SYSTEM (df-emoji)
     ============================================
     Sistema per usare emoji come icone in modo consistente e accessibile.

     PERCH√â QUESTO APPROCCIO:
     - Le emoji hanno rendering diverso su ogni OS (Apple, Google, Windows)
     - Senza normalizzazione, dimensioni e allineamento sono imprevedibili
     - L'accessibilit√† richiede attributi ARIA appropriati

     USO:
     - Decorativa: <span class="df-emoji" aria-hidden="true">üéØ</span>
     - Con significato: <span class="df-emoji" role="img" aria-label="target">üéØ</span>
     - Come icona inline: <span class="df-emoji df-emoji-inline">üìß</span> Email
     - Dimensioni: df-emoji-sm, df-emoji-lg, df-emoji-xl
     ============================================ */

  /* Base: normalizza il rendering delle emoji */
  .df-emoji {
    /* Font stack ottimizzato per emoji colorate su tutti i sistemi */
    font-family: "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji",
      "Android Emoji", EmojiSymbols, sans-serif;
    font-style: normal;
    font-weight: normal;
    /* Previene che il browser applichi stili tipografici */
    font-variant: normal;
    text-transform: none;
    /* Dimensione base prevedibile */
    font-size: 1.2em;
    line-height: 1;
    /* Allineamento verticale consistente col testo */
    vertical-align: -0.1em;
    /* Previene selezione accidentale e text-decoration ereditati */
    text-decoration: none;
    /* Display inline per uso nel testo */
    display: inline;
    /* Disabilita legature che possono alterare alcune emoji */
    font-variant-ligatures: none;
    -webkit-font-smoothing: antialiased;
  }

  /* Emoji come icona a blocco (per layout flex/grid) */
  .df-emoji-block {
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  /* Emoji inline con spaziatura automatica dal testo */
  .df-emoji-inline {
    margin-right: 0.3em;
  }

  /* === DIMENSIONI ===
     Scala proporzionale per diversi contesti */
  .df-emoji-xs {
    font-size: 0.875em; /* ~14px - note a pi√® pagina */
  }

  .df-emoji-sm {
    font-size: 1em; /* ~16px - testo normale */
  }

  /* .df-emoji gi√† a 1.2em - dimensione default */

  .df-emoji-lg {
    font-size: 1.5em; /* ~24px - titoli sezione */
  }

  .df-emoji-xl {
    font-size: 2em; /* ~32px - hero, intestazioni */
  }

  .df-emoji-2xl {
    font-size: 3em; /* ~48px - decorazioni grandi */
  }

  /* === ACCESSIBILIT√Ä ===
     Le emoji decorative vanno nascoste agli screen reader.
     NOTA: usare sempre aria-hidden="true" nel markup per emoji puramente decorative.
     L'attributo aria-hidden="true" √® sufficiente per nasconderle. */

  /* === VARIANTE: Emoji non selezionabile ===
     Per emoji usate come icone UI che non dovrebbero essere copiate */
  .df-emoji-icon {
    user-select: none;
    pointer-events: none;
  }

  /* === ANIMAZIONE: Pulse per attirare attenzione === */
  .df-emoji-pulse {
    animation: df-emoji-pulse 2s ease-in-out infinite;
  }

  @keyframes df-emoji-pulse {
    0%,
    100% {
      transform: scale(1);
    }

    50% {
      transform: scale(1.1);
    }
  }

  /* === ANIMAZIONE: Wave (mano che saluta) === */
  .df-emoji-wave {
    display: inline-block;
    animation: df-emoji-wave 1.8s ease-in-out infinite;
    transform-origin: 70% 70%;
  }

  @keyframes df-emoji-wave {
    0%,
    100% {
      transform: rotate(0deg);
    }

    25% {
      transform: rotate(20deg);
    }

    75% {
      transform: rotate(-10deg);
    }
  }

  /* ============================================
     ICON SYSTEM (df-icon) - Tabler Icons
     ============================================
     Icone SVG inline via eleventy-plugin-icons.

     PERCH√â SVG INLINE:
     - Controllo totale su colore (currentColor), dimensioni, stroke
     - Nessuna richiesta HTTP aggiuntiva
     - Aspetto identico su tutti i browser/OS (a differenza delle emoji)

     USO NEI TEMPLATE:
       {% icon "tabler:home" %}
       {% icon "tabler:arrow-right", class="df-icon-lg" %}
       {% icon "tabler:mail", stroke-width="1.5" %}

     CATALOGO: https://tabler.io/icons
     ============================================ */

  /* Base: normalizza le icone SVG inline */
  .df-icon {
    /* Dimensione default: segue il font corrente */
    width: 1em;
    height: 1em;
    /* Allineamento verticale con il testo */
    vertical-align: -0.125em;
    /* Eredita il colore dal testo */
    stroke: currentcolor;
    /* Previene shrink in flex container */
    flex-shrink: 0;
    /* Display inline per uso nel testo */
    display: inline-block;
  }

  /* Icona con spaziatura automatica dal testo (a sinistra del testo) */
  .df-icon-inline {
    margin-right: 0.3em;
  }

  /* Icona con spaziatura a sinistra (a destra del testo) */
  .df-icon-inline-end {
    margin-left: 0.3em;
  }

  /* === DIMENSIONI ===
     Scala fissa per controllo preciso */
  .df-icon-xs {
    width: 0.75rem; /* 12px */
    height: 0.75rem;
  }

  .df-icon-sm {
    width: 1rem; /* 16px */
    height: 1rem;
  }

  /* .df-icon gi√† a 1em - dimensione default (segue font-size) */

  .df-icon-md {
    width: 1.25rem; /* 20px */
    height: 1.25rem;
  }

  .df-icon-lg {
    width: 1.5rem; /* 24px - dimensione nativa Tabler */
    height: 1.5rem;
  }

  .df-icon-xl {
    width: 2rem; /* 32px */
    height: 2rem;
  }

  .df-icon-2xl {
    width: 3rem; /* 48px */
    height: 3rem;
  }

  /* === SPESSORE LINEA ===
     Override per lo stroke-width delle icone Tabler */
  .df-icon-thin {
    stroke-width: 1;
  }

  .df-icon-light {
    stroke-width: 1.5;
  }

  /* Default Tabler √® 2, gi√† impostato nel plugin */

  .df-icon-bold {
    stroke-width: 2.5;
  }

  /* === ANIMAZIONI === */

  /* Rotazione continua (loading spinner) */
  .df-icon-spin {
    animation: df-icon-spin 1s linear infinite;
  }

  @keyframes df-icon-spin {
    from {
      transform: rotate(0deg);
    }

    to {
      transform: rotate(360deg);
    }
  }

  /* Pulse (attirare attenzione) */
  .df-icon-pulse {
    animation: df-icon-pulse 2s ease-in-out infinite;
  }

  @keyframes df-icon-pulse {
    0%,
    100% {
      opacity: 1;
    }

    50% {
      opacity: 0.5;
    }
  }
}
