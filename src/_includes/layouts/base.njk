<!DOCTYPE html>
<html lang="{{ site.language }}">
{% include "components/head.njk" %}
{% from "components/hero.njk" import hero as renderHero %}
{% from "components/sidebar.njk" import sidebar as renderSidebar, sidebarMobileFeatures, sidebarMobileCta %}
<body class="flex flex-col min-h-screen">
  {# hideNavbar: nasconde la navbar (usato in homepage) #}
  {% if not hideNavbar %}
  {% include "components/navbar.njk" %}
  {% endif %}

  <main class="flex-1">
    {# Hero: renderizzato se presente hero.title nel frontmatter #}
    {%- if hero.title -%}
    {{ renderHero(
      title=hero.title,
      subtitle=hero.subtitle,
      tagline=hero.tagline,
      video=hero.video,
      image=hero.image,
      imageAlt=hero.imageAlt,
      className=hero.className
    ) }}
    {%- endif -%}

    {# Content container #}
    <div class="max-w-6xl mx-auto px-8 flex flex-col lg:flex-row justify-center gap-8 py-8">
      {# prose: applica classi tipografiche (default: true) #}
      {# maxW: larghezza massima del content (default: "xl") #}
      {% set proseClasses = "prose prose-lg" if prose !== false else "" %}
      {% set maxWClass = "max-w-" + (maxW if maxW else "xl") %}
      <div class="flex-1 min-w-0 mx-auto {{ proseClasses }} {{ maxWClass }}">
        {{ content | safe }}
      </div>
      {% if sidebarData %}
      <div class="w-full lg:w-72 shrink-0 mx-auto hidden lg:block">
        {{ renderSidebar(
          price=sidebarData.price,
          ctaText=sidebarData.ctaText,
          ctaUrl=sidebarData.ctaUrl,
          paymentNote=sidebarData.paymentNote,
          urgencyNote=sidebarData.urgencyNote,
          tagline=sidebarData.tagline,
          features=sidebarData.features,
          secondaryTitle=sidebarData.secondaryTitle,
          secondarySubtitle=sidebarData.secondarySubtitle,
          secondaryFeatures=sidebarData.secondaryFeatures
        ) }}
      </div>
      {# Mobile: features + CTA fixed #}
      <div class="flex-1 min-w-0 mx-auto lg:hidden mt-8">
        {{ sidebarMobileFeatures(
          tagline=sidebarData.tagline,
          features=sidebarData.features,
          secondaryTitle=sidebarData.secondaryTitle,
          secondarySubtitle=sidebarData.secondarySubtitle,
          secondaryFeatures=sidebarData.secondaryFeatures
        ) }}
      </div>
      {{ sidebarMobileCta(
        price=sidebarData.price,
        ctaText=sidebarData.ctaText,
        ctaUrl=sidebarData.ctaUrl,
        paymentNote=sidebarData.paymentNote,
        urgencyNote=sidebarData.urgencyNote
      ) }}
      {% endif %}
    </div>
  </main>

  {% include "components/footer.njk" %}

  <!-- JavaScript -->
  <script src="/assets/js/main.js"></script>
</body>
</html>

