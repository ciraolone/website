{#
  Componente Card Riutilizzabile (Stile Neobrutalista)

  Parametri:
  - image: percorso dell'immagine (opzionale, alternativa a video/iframe)
  - video: percorso del video (opzionale, alternativa a image/iframe)
  - iframe: URL iframe da embeddare (opzionale, alternativa a image/video)
  - iframeHeight: altezza iframe (default: "320px")
  - imageAlt: testo alternativo per l'immagine
  - headerText: testo dell'header giallo (opzionale, default: titolo o vuoto)
  - title: titolo della card (opzionale)
  - description: descrizione/testo della card (opzionale)
  - buttonText: testo del pulsante (opzionale)
  - buttonUrl: URL del pulsante (opzionale)
  - buttonVariant: variante stile bottone - "primary" o "secondary" (default: "primary")
  - cardUrl: URL per rendere l'intera card cliccabile (opzionale)
  - className: classi CSS aggiuntive per la card (opzionale)
  - imageClassName: classi CSS aggiuntive per l'immagine (opzionale)
  - videoClassName: classi CSS aggiuntive per il video (opzionale)
  - showHeader: mostra header giallo (default: true se headerText o title)

  Uso come macro:
  {% from "components/card.njk" import card %}
  {{ card(video="/path/to/video.mp4", headerText="Titolo") }}
  {{ card(iframe="https://example.com/embed", headerText="Newsletter", iframeHeight="320px") }}
#}

{% from "components/button.njk" import button %}

{% macro card(video="", image="", iframe="", iframeHeight="320px", imageAlt="", headerText="", title="", description="", buttonText="", buttonUrl="", buttonVariant="primary", cardUrl="", className="", imageClassName="", videoClassName="", showHeader=true) %}
{#
  Container principale della card con stile neobrutalista:
  - border-2: bordo nero spesso 2px
  - shadow-[4px_4px_0_0,8px_8px_0_0]: doppia ombra per effetto 3D caratteristico
  - bg-white: sfondo bianco
  - not-prose: disabilita stili Typography di Tailwind su tutta la card
#}
<article class="border-2 my-8 border-black bg-white shadow-[4px_4px_0_0,8px_8px_0_0] not-prose overflow-hidden rounded-default {{ className }}">

  {# Header con colore primario con titolo e box decorativi (opzionale) - tutto su una riga per evitare processing Markdown #}
  {% if showHeader !== false and (headerText or title) %}<div class="p-3 bg-primary"><div class="flex items-center justify-between"><strong class="text-xs/none font-bold uppercase">{{ headerText or title }}</strong><div class="flex gap-1"><div class="size-3 border-2 border-black bg-white"></div><div class="size-3 border-2 border-black bg-white"></div></div></div></div>{% endif %}

  {#
    Container video/immagine/iframe:
    - bg-black: sfondo nero nasconde il micro-pixel a destra del video
    - overflow-hidden: taglia eventuali overflow
    - leading-[0]: rimuove line-height per eliminare spazi verticali
    - border-t-2: bordo superiore solo se c'Ã¨ header
  #}
  {% if video %}<div class="{% if showHeader !== false and (headerText or title) %}border-t-2 {% endif %}border-black bg-black overflow-hidden leading-[0]">{# Video auto-play in loop, block elimina spazio inline sotto l'elemento #}<video autoplay loop muted playsinline class="w-full h-auto block max-w-full {{ videoClassName }}"><source src="{{ video }}" type="video/mp4"></video></div>{% elif image %}<div class="{% if showHeader !== false and (headerText or title) %}border-t-2 {% endif %}border-black bg-black overflow-hidden leading-[0]">{# Immagine lazy-loaded, block elimina spazio inline #}<img src="{{ image }}" alt="{{ imageAlt or title or 'Immagine card' }}" class="w-full h-auto block max-w-full {{ imageClassName }}" loading="lazy"></div>{% elif iframe %}<div class="{% if showHeader !== false and (headerText or title) %}border-t-2 {% endif %}border-black bg-white overflow-hidden leading-[0]">{# Iframe embeddato #}<iframe src="{{ iframe }}" width="100%" height="{{ iframeHeight }}" style="border:0; background:transparent; margin: 0; padding: 0;" frameborder="0" scrolling="no" class="block max-w-full"></iframe></div>{% endif %}

  {# Sezione testo e bottone (opzionale) #}
  {% if title or description or buttonText %}
  <div class="border-t-2 border-black p-4 sm:p-6">
    {# Titolo interno (mostrato sempre se presente) #}
    {% if title %}
      <h3 class="text-lg font-semibold text-black font-accent">{{ title }}</h3>
    {% endif %}

    {# Descrizione con text-pretty per miglior formattazione #}
    {% if description %}
      <p class="mt-2 text-sm text-pretty">{{ description }}</p>
    {% endif %}

    {# Bottone call-to-action stile neobrutalista #}
    {% if buttonText and buttonUrl %}
      <div>
        <a
          href="{{ buttonUrl }}"
          class="inline-block border-2 border-black px-5 py-3 font-semibold text-black shadow-[4px_4px_0_0] focus:outline-0 transition-colors duration-300 bg-primary hover:bg-primary-dark focus-ring-primary rounded-default"
        >{{ buttonText }}</a>
      </div>
    {% endif %}
  </div>
  {% endif %}
</article>
{% endmacro %}
